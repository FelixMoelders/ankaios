<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="376px" preserveAspectRatio="none" style="width:764px;height:376px;background:#FFFFFF;" version="1.1" viewBox="0 0 764 376" width="764px" zoomAndPan="magnify"><defs/><g><rect fill="#EEEEEE" height="364.6563" style="stroke:#D3D3D3;stroke-width:0.5;" width="557" x="21" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="110" x="244.5" y="18.0669">Ankaios Server</text><rect fill="#EEEEEE" height="364.6563" style="stroke:#D3D3D3;stroke-width:0.5;" width="139" x="619" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="115" x="631" y="18.0669">Ankaios Agents</text><rect fill="none" height="69.2656" style="stroke:#000000;stroke-width:1.5;" width="271" x="65" y="213.125"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="81" x2="81" y1="72.7266" y2="80.7266"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="81" x2="81" y1="80.7266" y2="108.7266"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="81" x2="81" y1="108.7266" y2="364.6563"/><rect fill="#FFFFFF" height="150.5313" style="stroke:#181818;stroke-width:1.0;" width="10" x="76" y="166.9922"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="320" x2="320" y1="72.7266" y2="80.7266"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="320" x2="320" y1="80.7266" y2="108.7266"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="320" x2="320" y1="108.7266" y2="364.6563"/><rect fill="#FFFFFF" height="21.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="315" y="325.5234"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="505.5" x2="505.5" y1="72.7266" y2="80.7266"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="505.5" x2="505.5" y1="80.7266" y2="108.7266"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="505.5" x2="505.5" y1="108.7266" y2="364.6563"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="500.5" y="129.8594"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="688.5" x2="688.5" y1="72.7266" y2="80.7266"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="688.5" x2="688.5" y1="80.7266" y2="108.7266"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="688.5" x2="688.5" y1="108.7266" y2="364.6563"/><rect fill="#FFFFFF" height="250.9297" style="stroke:#181818;stroke-width:1.0;" width="10" x="683.5" y="108.7266"/><rect fill="#E3E3E3" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="112" x="25" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="34.5" y="45.1279">&lt;&lt;thread&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="32" y="61.4248">AnkaiosServer</text><rect fill="#E3E3E3" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="214" x="213" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="273.5" y="45.1279">&lt;&lt;thread&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="200" x="220" y="61.4248">GRPCCommunicationsServer</text><rect fill="#E3E3E3" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="137" x="437" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="459" y="45.1279">&lt;&lt;thread&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="123" x="444" y="61.4248">tonic gRPC server</text><rect fill="#E3E3E3" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="661" y="41.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="668" y="61.4248">Agent</text><line style="stroke:#181818;stroke-width:1.0;" x1="511.5" x2="521.5" y1="129.8594" y2="125.8594"/><line style="stroke:#181818;stroke-width:1.0;" x1="511.5" x2="521.5" y1="129.8594" y2="133.8594"/><line style="stroke:#181818;stroke-width:1.0;" x1="510.5" x2="682.5" y1="129.8594" y2="129.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="527.5" y="124.7935">RequestCompleteState</text><line style="stroke:#181818;stroke-width:1.0;" x1="82" x2="92" y1="158.9922" y2="154.9922"/><line style="stroke:#181818;stroke-width:1.0;" x1="82" x2="92" y1="158.9922" y2="162.9922"/><line style="stroke:#181818;stroke-width:1.0;" x1="81" x2="499.5" y1="158.9922" y2="158.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="98" y="153.9263">RequestCompleteState</text><line style="stroke:#181818;stroke-width:1.0;" x1="86" x2="128" y1="188.125" y2="188.125"/><line style="stroke:#181818;stroke-width:1.0;" x1="128" x2="128" y1="188.125" y2="201.125"/><line style="stroke:#181818;stroke-width:1.0;" x1="87" x2="128" y1="201.125" y2="201.125"/><polygon fill="#181818" points="97,197.125,87,201.125,97,205.125" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="93" y="183.0591">get CompleteState</text><path d="M65,213.125 L129,213.125 L129,220.2578 L119,230.2578 L65,230.2578 L65,213.125 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="69.2656" style="stroke:#000000;stroke-width:1.5;" width="271" x="65" y="213.125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="80" y="226.1919">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="158" x="144" y="225.3354">[request has field_mask]</text><line style="stroke:#181818;stroke-width:1.0;" x1="86" x2="128" y1="261.3906" y2="261.3906"/><line style="stroke:#181818;stroke-width:1.0;" x1="128" x2="128" y1="261.3906" y2="274.3906"/><line style="stroke:#181818;stroke-width:1.0;" x1="87" x2="128" y1="274.3906" y2="274.3906"/><polygon fill="#181818" points="97,270.3906,87,274.3906,97,278.3906" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="220" x="93" y="256.3247">filter CompleteState by field_mask</text><line style="stroke:#181818;stroke-width:1.0;" x1="318" x2="308" y1="317.5234" y2="313.5234"/><line style="stroke:#181818;stroke-width:1.0;" x1="318" x2="308" y1="317.5234" y2="321.5234"/><line style="stroke:#181818;stroke-width:1.0;" x1="86" x2="319" y1="317.5234" y2="317.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="93" y="312.4575">CompleteState</text><line style="stroke:#181818;stroke-width:1.0;" x1="681.5" x2="671.5" y1="346.6563" y2="342.6563"/><line style="stroke:#181818;stroke-width:1.0;" x1="681.5" x2="671.5" y1="346.6563" y2="350.6563"/><line style="stroke:#181818;stroke-width:1.0;" x1="325" x2="682.5" y1="346.6563" y2="346.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="332" y="341.5903">CompleteState</text><!--MD5=[d47c4cb9195709fbbe34648ac25fa7ea]
@startuml seq_get_complete_state
!include ../../../../doc/plantuml/clean.skin

box "Ankaios Server"
participant "<<thread>>\nAnkaiosServer" as server
participant "<<thread>>\nGRPCCommunicationsServer" as grpc_server
participant "<<thread>>\ntonic gRPC server" as tonic_server
end box


box "Ankaios Agents" 
participant "Agent" as agent
end box

activate agent

...
agent ->> tonic_server++: RequestCompleteState
tonic_server ->> server- -++: RequestCompleteState
server -> server: get CompleteState
alt request has field_mask
server -> server: filter CompleteState by field_mask
end
server ->> grpc_server- -++: CompleteState
grpc_server ->> agent- -: CompleteState
deactivate agent



@enduml

@startuml seq_get_complete_state
skinparam monochrome true
skinparam guillemet true
skinparam style strictuml
hide empty members
hide empty methods

skinparam class {
    BorderColor<<logical entity>> grey
    FontColor<<logical entity>> grey
    StereotypeFontColor<<logical entity>> grey
}

skinparam sequenceBox {
    BorderColor #LightGrey
    BackgroundColor #EEEEEE
    FontColor #777777
}

skinparam BoxPadding 10

skinparam note {
    BackgroundColor #FFFFFF
}

skinparam nodesep 30
skinparam ranksep 30

!pragma teoz true

box "Ankaios Server"
participant "<<thread>>\nAnkaiosServer" as server
participant "<<thread>>\nGRPCCommunicationsServer" as grpc_server
participant "<<thread>>\ntonic gRPC server" as tonic_server
end box


box "Ankaios Agents" 
participant "Agent" as agent
end box

activate agent

...
agent ->> tonic_server++: RequestCompleteState
tonic_server ->> server- -++: RequestCompleteState
server -> server: get CompleteState
alt request has field_mask
server -> server: filter CompleteState by field_mask
end
server ->> grpc_server- -++: CompleteState
grpc_server ->> agent- -: CompleteState
deactivate agent



@enduml

PlantUML version 1.2022.7(Mon Aug 22 17:01:30 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: ANSI_X3.4-1968
Language: en
Country: US
--></g></svg>